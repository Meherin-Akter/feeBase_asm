                                       


;feeBase: Semester Fee management
;DEVELOPED BY: Meherin[181-15-10634]
;              SEC: F BATCH: 49TH(CSE)



INCLUDE 'EMU8086.INC'
.MODEL SMALL
.STACK 100H

.DATA

FNAME   DB 'DataBase/Semester.txt',0
PASS    DB 'SECF'
HANDLE  DW ?
CSE     DB '111,121,133,211,223,231'
INPUT   DB 0
TEMP    DB ?
SIZE    =  $-OFFSET CSE
COUNT   DW SIZE
BUFFER  DB SIZE DUP('$')
TCN     DB ?
ARR     DB 4 DUP('$')

COST    DW 0
PERC    DW 0
OUTPUT  DW ?
TCST    DW ?



CSE211  DB '211$'
CSE223  DB '223$'
CSE231  DB '231$'
CSE313  DB '313$'
CSE321  DB '321$'
CSE333  DB '333$'


HELLO   DB 10,13,"----------------------------------* WELCOME *----------------------------------$"
CHOICE  DB ?

.CODE

MAIN PROC


CALL AUTH             ;TO AUTHENTICATE USER WITH A PIN(PIN: SECF)




;ACTUAL CODE STARTS FROM HERE...
START:

MOV AX,@DATA
MOV DS,AX
MOV ES,AX

MOV AH,9
LEA DX,HELLO
INT 21H

PRINTN
PRINTN
PRINT "Please enter any of the number from options below: "
PRINTN
PRINTN

PRINT "1->FIND COST OF A SPECIFIC SEMESTER"
PRINTN
PRINT "2->COST LIST OF ALL SEMESTERS "
PRINTN
PRINT "3->FEE CALCULATOR"
PRINTN
PRINT "0->EXIT"
PRINTN
PRINTN
PRINT "----------------------------------* ####### *----------------------------------"

PRINTN
PRINTN
PRINT "ENTER YOUR OPTION -> "

MOV AH,1
INT 21H
MOV CHOICE,AL

CMP CHOICE,'0'
JE  EXIT

CMP CHOICE,'1'
JE  CALL_ALL

CMP CHOICE,'2'
JE  CALL_SEM

CMP CHOICE,'3'
JE  CALL_FEE

JNE RESET


RESET:
PRINTN
PRINTN
PRINTN
PRINT "                  !WRONG INPUT!"
PRINTN
PRINTN
PRINTN

MOV AH, 0
MOV AL, 2
INT 10H

JMP START


CALL_ALL:
CALL ALL


CALL_SEM:
CALL SEM


CALL_FEE:
CALL FEE



EXIT:
MOV AH, 0
MOV AL, 13H
INT 10H

PRINTN
PRINTN
PRINTN
PRINTN
PRINT "--------------------------------------------------------------------------------"
PRINTN
PRINTN
PRINTN
PRINTN
PRINT "               THANK YOU!"
PRINTN
PRINTN
PRINTN
PRINTN
PRINT "--------------------------------------------------------------------------------"


MOV AH,4CH
INT 21H


ENDP MAIN


ALL PROC

MOV AH,3DH
MOV DX,OFFSET(FNAME)
MOV AL,0
INT 21H
MOV HANDLE,AX

MOV AH,3FH
MOV BX,HANDLE
MOV DX,OFFSET(BUFFER)
MOV CX,COUNT
INT 21H

PRINTN
PRINTN
PRINT "SEMESTER CODES:<CSE> "
MOV AH,9
LEA DX,BUFFER
INT 21H

PRINTN
PRINT "ENTER SEMESTER CODE:<CSE> "
MOV TCN,0
MOV SI,OFFSET ARR

INP:
CMP TCN,3
JE  CHK_SEM

INC TCN
MOV AH,1
INT 21H
MOV [SI],AL
INC SI

JMP INP

CHK_SEM:
CALL COMP_SEM

CLOSE:

MOV AH, 0
MOV AL, 2
INT 10H

JMP START

ENDP ALL


;ALL COST LIST STARTS HERE
SEM PROC


PRINTN
PRINTN
PRINT "NO.  -  CREDIT  -   REG.    -   MID    -  FINAL          "
PRINTN
PRINT "---------------------------------------------------------"
PRINTN
PRINTN
PRINT "1    -    10    -  13,500   -  15,000  -  15,000   TAKA  "
PRINTN
PRINT "2    -    11    -  13,500   -  16,500  -  16,500   TAKA  "
PRINTN
PRINT "3    -    13    -  13,500   -  19,500  -  19,500   TAKA  "
PRINTN
PRINT "4    -    14    -  13,500   -  20,000  -  20,000   TAKA  "
PRINTN
PRINT "5    -    10    -  13,500   -  15,000  -  15,000   TAKA  "
PRINTN
PRINT "6    -    14    -  13,500   -  21,000  -  21,000   TAKA  "
PRINTN
PRINTN
PRINT "PRESS ANY KEY TO CONTINUE..."

MOV AH,8
INT 21H
JMP CLEAN

CLEAN:
MOV AH, 0
MOV AL, 2
INT 10H

JMP START

ENDP SEM



;HERE THE INPUT SEMESTER AND DATASET IS COMPARED
COMP_SEM PROC

MOV SI,0
MOV DI,0

MOV AL,BUFFER[SI]
MOV DL,ARR[SI]



CMP AL,DL
JE  COST1
JNE SEM1

SEM1:
MOV SI,0

MOV AL,ARR[SI]
MOV DL,BUFFER[DI]

CMP  AL,DL
JE   COST2
JNE  SEM2

SEM2:
MOV SI,0

MOV AL,ARR[SI]
MOV DL,BUFFER[DI]

CMP  AL,DL
JE   COST3
JNE  SEM3

SEM3:
MOV CX,2

LEA SI,CSE211
LEA DI,ARR

CLD
REPE CMPSB
JE   COST4
JNE  SEM4

SEM4:
MOV CX,2

LEA SI,CSE223
LEA DI,ARR

CLD
REPE CMPSB
JE   COST5
JNE  SEM5

SEM5:
MOV CX,2

LEA SI,CSE231
LEA DI,ARR

CLD
REPE CMPSB
JE   COST6
JNE  NO_SEM

NO_SEM:
PRINTN
PRINT "RECORD NOT FOUND, INVALID INPUT!!  "
PRINTN
PRINTN
PRINT "PRESS ANY KEY TO CONTINUE..."

MOV AH,8
INT 21H
JMP BACK

COST1:
INC SI
MOV AL,BUFFER[SI]
MOV DL,ARR[SI]
MOV DI,4

CMP AL,DL
JE  COST11
JNE SEM1

COST2:
INC SI
INC DI
MOV AL,BUFFER[DI]
MOV DL,ARR[SI]
ADD DI,3

CMP AL,DL
JE  COST22
JNE SEM2

COST3:
INC SI
INC DI
MOV AL,BUFFER[DI]
MOV DL,ARR[SI]

CMP AL,DL
JE  COST33
JNE SEM3


;PER SEMESTER COST LIST STARTS HERE

COST11:

MOV AH, 0
MOV AL, 2
INT 10H

PRINTN
PRINT "1ST YEAR, 1ST SEMESTER"
PRINTN
PRINT "REG.     -   CREDIT    -   MID    -  FINAL          "
PRINTN
PRINT "----------------------------------------------------"
PRINTN
PRINT "CSE111   -      3      -  4,500   -  4,500    TAKA  "
PRINTN
PRINT "CSE112   -      3      -  4,500   -  4,500    TAKA  "
PRINTN
PRINT "CSE114   -      3      -  4,500   -  4,500    TAKA  "
PRINTN
PRINT "CSE115   -      1      -  1,500   -  1,500    TAKA  "
PRINTN
PRINT "----------------------------------------------------"
PRINTN
PRINT "13,500   -     10      -  15,000  -  15,000   TAKA  "
PRINTN
PRINTN
PRINT "PRESS ANY KEY TO CONTINUE..."

MOV AH,8
INT 21H
JMP BACK

COST22:

MOV AH, 0
MOV AL, 2
INT 10H

PRINTN
PRINT "1ST YEAR, 2ND SEMESTER"
PRINTN
PRINT "REG.     -   CREDIT    -   MID    -  FINAL          "
PRINTN
PRINT "----------------------------------------------------"
PRINTN
PRINT "CSE121   -      3      -  4,500   -  4,500    TAKA  "
PRINTN
PRINT "CSE122   -      3      -  4,500   -  4,500    TAKA  "
PRINTN
PRINT "CSE123   -      1      -  1,500   -  1,500    TAKA  "
PRINTN
PRINT "CSE124   -      3      -  4,500   -  4,500    TAKA  "
PRINTN
PRINT "CSE125   -      1      -  1,500   -  1,500    TAKA  "
PRINTN
PRINT "----------------------------------------------------"
PRINTN
PRINT "13,500   -     11      -  16,500  -  16,500   TAKA  "
PRINTN
PRINTN
PRINT "PRESS ANY KEY TO CONTINUE..."

MOV AH,8
INT 21H
JMP BACK

COST33:

MOV AH, 0
MOV AL, 2
INT 10H

PRINTN
PRINT "1ST YEAR, 3RD SEMESTER"
PRINTN
PRINT "REG.     -   CREDIT    -   MID    -  FINAL          "
PRINTN
PRINT "----------------------------------------------------"
PRINTN
PRINT "CSE131   -      3      -  4,500   -  4,500    TAKA  "
PRINTN
PRINT "CSE132   -      3      -  4,500   -  4,500    TAKA  "
PRINTN
PRINT "CSE133   -      3      -  4,500   -  4,500    TAKA  "
PRINTN
PRINT "CSE134   -      3      -  4,500   -  4,500    TAKA  "
PRINTN
PRINT "CSE135   -      1      -  1,500   -  1,500    TAKA  "
PRINTN
PRINT "----------------------------------------------------"
PRINTN
PRINT "13,500   -     13      -  19,500  -  19,500   TAKA  "
PRINTN
PRINTN
PRINT "PRESS ANY KEY TO CONTINUE..."

MOV AH,8
INT 21H
JMP BACK

COST4:

MOV AH, 0
MOV AL, 2
INT 10H

PRINTN
PRINT "2ND YEAR, 1ST SEMESTER"
PRINTN
PRINT "REG.     -   CREDIT    -   MID    -  FINAL          "
PRINTN
PRINT "----------------------------------------------------"
PRINTN
PRINT "CSE211   -      3      -  4,500   -  4,500    TAKA  "
PRINTN
PRINT "CSE212   -      3      -  4,500   -  4,500    TAKA  "
PRINTN
PRINT "CSE213   -      1      -  1,500   -  1,500    TAKA  "
PRINTN
PRINT "GED214   -      3      -  3,500   -  3,500    TAKA  "
PRINTN
PRINT "CSE215   -      3      -  4,500   -  4,500    TAKA  "
PRINTN
PRINT "CSE216   -      1      -  1,500   -  1,500    TAKA  "
PRINTN
PRINT "----------------------------------------------------"
PRINTN
PRINT "13,500   -     14      -  20,000  -  20,000   TAKA  "
PRINTN
PRINTN
PRINT "PRESS ANY KEY TO CONTINUE..."

MOV AH,8
INT 21H
JMP BACK

COST5:

MOV AH, 0
MOV AL, 2
INT 10H

PRINTN
PRINT "2ND YEAR, 2ND SEMESTER"
PRINTN
PRINT "REG.     -   CREDIT    -   MID    -  FINAL          "
PRINTN
PRINT "----------------------------------------------------"
PRINTN
PRINT "CSE221   -      3      -  4,500   -  4,500    TAKA  "
PRINTN
PRINT "CSE222   -      3      -  4,500   -  4,500    TAKA  "
PRINTN
PRINT "CSE223   -      1      -  1,500   -  1,500    TAKA  "
PRINTN
PRINT "CSE224   -      3      -  4,500   -  4,500    TAKA  "
PRINTN
PRINT "----------------------------------------------------"
PRINTN
PRINT "13,500   -     10      -  15,000  - 15,000   TAKA  "
PRINTN
PRINTN
PRINT "PRESS ANY KEY TO CONTINUE..."

MOV AH,8
INT 21H
JMP BACK

COST6:

MOV AH, 0
MOV AL, 2
INT 10H

PRINTN
PRINT "2ND YEAR, 3RD SEMESTER"
PRINTN
PRINT "REG.     -   CREDIT    -   MID    -  FINAL          "
PRINTN
PRINT "----------------------------------------------------"
PRINTN
PRINT "CSE231   -      3      -  4,500   -  4,500    TAKA  "
PRINTN
PRINT "CSE232   -      3      -  4,500   -  4,500    TAKA  "
PRINTN
PRINT "CSE233   -      1      -  1,500   -  1,500    TAKA  "
PRINTN
PRINT "CSE234   -      3      -  4,500   -  4,500    TAKA  "
PRINTN
PRINT "CSE235   -      1      -  1,500   -  1,500    TAKA  "
PRINTN
PRINT "CSE236   -      3      -  4,500   -  4,500    TAKA  "
PRINTN
PRINT "----------------------------------------------------"
PRINTN
PRINT "13,500   -     14      -  21,000  - 21,000   TAKA  "
PRINTN
PRINTN
PRINT "PRESS ANY KEY TO CONTINUE..."

MOV AH,8
INT 21H
JMP BACK

BACK:
RET

ENDP COMP_SEM




;WAVER OR COST CALCULATION
FEE PROC


PRINTN
PRINTN
PRINT "ENTER YOUR ORIGINAL COST: "

MOV TCN,0

MOV AH,1
INT 21H
MOV TEMP,AL

COSTL:
CMP TCN,5
JE  CALC_PRO
SUB AL,48
XOR AH,AH
MOV TCST,AX

INC TCN

MOV AX,COST
MOV BX,10
MUL BX
ADD AX,TCST
MOV COST,AX

MOV AH,1
INT 21H
MOV TEMP,AL

CMP TEMP, 13
JNE COSTL


CALC_PRO:

MOV TCN,0

PRINTN
PRINT "ENTER YOUR PERCENTAGE(%): "
MOV AH,1
INT 21H
MOV TEMP,AL

PERCL:
CMP TCN,2
JE  CALC_PRO2
SUB AL,48
XOR AH,AH
MOV TCST,AX

INC TCN

MOV AX,PERC
MOV BX,10
MUL BX
ADD AX,TCST
MOV PERC,AX

MOV AH,1
INT 21H
MOV TEMP,AL

CMP TEMP, 13
JNE PERCL


CALC_PRO2:

XOR AX,AX
XOR DX,DX
XOR BX,BX

MOV AX,COST
MOV BX,PERC
MUL BX
MOV BX,100
DIV BX
MOV TCST,AX

MOV AX,COST
SUB AX,TCST
MOV COST,AX


PRINTN
PRINTN
PRINT "YOUR PAYABLE COST FEE: "

MOV AX,COST
MOV OUTPUT,AX
CALL OUTDEC


PRINTN
PRINTN
PRINT "CONTINUE..."

MOV AH,8
INT 21H

MOV AH, 0
MOV AL, 2
INT 10H

JMP START

ENDP FEE




;FOR CREATING DATABASE
CREATE PROC

PRINTN
PRINT "CREATING TEXT FILE... "

MOV AH,3CH
MOV DX,OFFSET(FNAME)
MOV CL,1
INT 21H
MOV HANDLE,AX

MOV AH,3EH
MOV DX,HANDLE
INT 21H

MOV AH,3DH
MOV DX,OFFSET(FNAME)
MOV AL,1
INT 21H
MOV HANDLE,AX

MOV AH,40H
MOV BX,HANDLE
MOV CX,COUNT
MOV DX, OFFSET(CSE)
INT 21H


PRINTN
PRINT "CREATED A TEXT FILE!  "

MOV AH,3EH
MOV DX,HANDLE
INT 21H

PRINTN
PRINTN
PRINTN
PRINT "CLOSING FILE!..........  "
PRINTN
PRINTN

MOV AH, 0
MOV AL, 2
INT 10H

JMP START

ENDP CREATE





AUTH PROC

PRINT "ENTER THE VALID PIN TO CONTINUE: "
PRINTN

PASS_CHECK:
MOV AX,@DATA
MOV DS,AX

PRINTN
PRINT "ENTER THE PIN: "

MOV CX,4
MOV DI,OFFSET PASS


COMPARE:
MOV DL,[DI]
MOV AH,8
INT 21H
CMP DL,AL
JE  CHECK

PRINTN
PRINT "INVALID INPUT!!"
PRINTN

JMP PASS_CHECK

CHECK:
MOV AH,2
MOV DL,'*'
INT 21H

CMP CX,1
JE  DONE
DEC CX
ADD DI,1
JMP COMPARE

DONE:
PRINTN
PRINTN
PRINT "PASSWORD MATCHED, YOU CAN CONTINUE NOW!...       "
PRINTN
PRINTN

PRINT "CHOSE AN OPTION: "

PRINTN
PRINTN

PRINT "  1    -> UPDATE DATABASE."
PRINTN
PRINT " ANY   -> CONTINUE."
PRINTN
PRINTN
PRINTN
PRINT "YOU'VE CHOSED: "

MOV AH,1
INT 21H

CMP AL,'1'

JE  UPDATE
JNE BACK2

UPDATE:
MOV AH, 0
MOV AL, 2
INT 10H

CALL CREATE           ;TO REMAKE THE DATABASE

BACK2:
MOV AH, 0
MOV AL, 2
INT 10H

JMP START

ENDP AUTH




OUTDEC PROC

MOV BP,SP
L2:
XOR AX,AX
XOR DX,DX

MOV AX,OUTPUT
MOV BX,10
DIV BX
MOV OUTPUT,AX

ADD DX,48
PUSH DX

CMP OUTPUT,0
JNE L2

RE:
POP DX
MOV AH,2
INT 21H

CMP SP,BP
JNE RE

RET

OUTDEC ENDP



END



